(function($,moment){"use strict";if(!$)throw"jquery not found";var mixpanel=window.mixpanel||{},editor,setOutput=function(e){var t=!!arguments[1],n=$(".output span");n.html(e).removeClass("error");t&&n.addClass("error");$(".spinner").fadeOut("fast");$(".timestamp").find("span").html(moment((new Date).getTime()).format("h:mm a"))},processCode=function(){var code=editor.getValue();if(!code.length){setOutput("Please supply some code...");return}$(".spinner").fadeIn("fast");mixpanel.track("Code Run",{code:code});try{eval(code)}catch(e){setOutput(e,!0);mixpanel.track("Error",{error:e})}},triggerBackspace=function(){editor.setValue(editor.getValue().slice(0,-1))},saveCode=function(){if(window.localStorage){var e=editor.getValue();localStorage.setItem("code",e);$(".timestamp").find("span").html("Code Saved!");mixpanel.track("Code Saved")}},loadSavedCode=function(){if(window.localStorage){var e=localStorage.getItem("code"),t=e?e:"console.log('Andrepl');";editor.setValue(t)}};editor=window.CodeMirror($("#editor")[0],{lineNumbers:!0,matchBrackets:!0,mode:"javascript",indentUnit:2,tabSize:2,autofocus:!0,autoCloseBrackets:!0});window.console={log:setOutput};loadSavedCode();$(".submit button").click(processCode);$(document).keydown(function(e){if(e.which===13&&(e.ctrlKey||e.metaKey)){processCode();e.preventDefault()}});$(window).unload(saveCode);$(document).keydown(function(e){if(e.which===229||e.which===67){triggerBackspace();return!1}})})(window.$,window.moment);